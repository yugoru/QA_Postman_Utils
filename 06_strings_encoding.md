# 06 ‚Äî –°—Ç—Ä–æ–∫–∏ –∏ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ (–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è / –æ—á–∏—Å—Ç–∫–∞)

–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –Ω–∏–∂–µ –≤—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –≤ **Pre-request Script** –∏ –ø–∏—à—É—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ **Globals**.

**–ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ö–æ–¥–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**:
- **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**: –ø—Ä—è–º–æ –≤ —Å–∫—Ä–∏–ø—Ç–µ —á–µ—Ä–µ–∑ `pm.globals.set()` –ø–µ—Ä–µ–¥ –æ—Å–Ω–æ–≤–Ω—ã–º —Å–∫—Ä–∏–ø—Ç–æ–º
- **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞**: –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Postman (–º–µ–Ω—é Globals)

---

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (Globals)

### –í—Ö–æ–¥–Ω—ã–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `str_in` ‚Äî –≤—Ö–æ–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –í—ã—Ö–æ–¥–Ω—ã–µ
- `str_yo_to_e` ‚Äî —Å—Ç—Ä–æ–∫–∞ —Å –∑–∞–º–µ–Ω–æ–π —ë –Ω–∞ –µ
- `str_clean` ‚Äî —Å—Ç—Ä–æ–∫–∞ –±–µ–∑ –Ω–µ–≤–∏–¥–∏–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
- `str_trimmed` ‚Äî —Å—Ç—Ä–æ–∫–∞ —Å trim –∏ collapse spaces
- `str_sanitized` ‚Äî —Å—Ç—Ä–æ–∫–∞ –æ—á–∏—â–µ–Ω–Ω–∞—è –¥–ª—è XML/JSON

---

## 1) –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —ë ‚Üí –µ

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**: –ó–∞–º–µ–Ω—è–µ—Ç –≤—Å–µ –±—É–∫–≤—ã "—ë" –Ω–∞ "–µ" –≤ —Å—Ç—Ä–æ–∫–µ.

**–í—Ö–æ–¥–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**:
- `str_in` ‚Äî –≤—Ö–æ–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞

**–í—ã—Ö–æ–¥–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è**: `str_yo_to_e` (—Å—Ç—Ä–æ–∫–∞ —Å –∑–∞–º–µ–Ω–æ–π)

```javascript
const strIn = pm.globals.get("str_in") || "";
const result = strIn.replace(/—ë/g, "–µ").replace(/–Å/g, "–ï");

pm.globals.set("str_yo_to_e", result);
console.log("str_yo_to_e =", result);
```

---

## 2) –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–≤–∏–¥–∏–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**: –£–¥–∞–ª—è–µ—Ç –Ω–µ–≤–∏–¥–∏–º—ã–µ –∏ –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –∏–∑ —Å—Ç—Ä–æ–∫–∏.

**–£–¥–∞–ª—è–µ–º—ã–µ —Å–∏–º–≤–æ–ª—ã**:
- `\u00A0` ‚Äî –Ω–µ—Ä–∞–∑—Ä—ã–≤–Ω—ã–π –ø—Ä–æ–±–µ–ª (NBSP)
- `\uFEFF` ‚Äî –º–∞—Ä–∫–µ—Ä –ø–æ—Ä—è–¥–∫–∞ –±–∞–π—Ç–æ–≤ (BOM)
- `\u200B` ‚Äî zero-width space
- `\u200C` ‚Äî zero-width non-joiner
- `\u200D` ‚Äî zero-width joiner
- `\u2060` ‚Äî word joiner

**–í—Ö–æ–¥–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**:
- `str_in` ‚Äî –≤—Ö–æ–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞

**–í—ã—Ö–æ–¥–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è**: `str_clean` (–æ—á–∏—â–µ–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞)

```javascript
const strIn = pm.globals.get("str_in") || "";

// –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–≤–∏–¥–∏–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
const result = strIn
  .replace(/\u00A0/g, " ")  // NBSP ‚Üí –æ–±—ã—á–Ω—ã–π –ø—Ä–æ–±–µ–ª
  .replace(/\uFEFF/g, "")    // BOM
  .replace(/[\u200B-\u200D]/g, "")  // zero-width spaces
  .replace(/\u2060/g, "");   // word joiner

pm.globals.set("str_clean", result);
console.log("str_clean =", result);
```

---

## 3) Trim + collapse spaces

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**: –£–¥–∞–ª—è–µ—Ç –ø—Ä–æ–±–µ–ª—ã –≤ –Ω–∞—á–∞–ª–µ –∏ –∫–æ–Ω—Ü–µ —Å—Ç—Ä–æ–∫–∏, –∞ —Ç–∞–∫–∂–µ —Å—Ö–ª–æ–ø—ã–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–µ–ª—ã –≤ –æ–¥–∏–Ω.

**–í—Ö–æ–¥–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**:
- `str_in` ‚Äî –≤—Ö–æ–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞

**–í—ã—Ö–æ–¥–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è**: `str_trimmed` (–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞)

```javascript
const strIn = pm.globals.get("str_in") || "";

// Trim –∏ collapse spaces
const result = strIn
  .trim()
  .replace(/\s+/g, " ");  // –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–µ–ª—ã ‚Üí –æ–¥–∏–Ω –ø—Ä–æ–±–µ–ª

pm.globals.set("str_trimmed", result);
console.log("str_trimmed =", result);
```

---

## 4) –û—á–∏—Å—Ç–∫–∞ –¥–ª—è XML/JSON

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**: –£–¥–∞–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—é—â–∏–µ —Å–∏–º–≤–æ–ª—ã –∏–∑ —Å—Ç—Ä–æ–∫–∏, –æ—Å—Ç–∞–≤–ª—è—è —Ç–æ–ª—å–∫–æ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ –¥–ª—è XML/JSON (–∫—Ä–æ–º–µ \n, \r, \t).

**–†–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ —É–ø—Ä–∞–≤–ª—è—é—â–∏–µ —Å–∏–º–≤–æ–ª—ã**: `\n` (–Ω–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞), `\r` (–≤–æ–∑–≤—Ä–∞—Ç –∫–∞—Ä–µ—Ç–∫–∏), `\t` (—Ç–∞–±—É–ª—è—Ü–∏—è)

**–í—Ö–æ–¥–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**:
- `str_in` ‚Äî –≤—Ö–æ–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞

**–í—ã—Ö–æ–¥–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è**: `str_sanitized` (–æ—á–∏—â–µ–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞)

```javascript
const strIn = pm.globals.get("str_in") || "";

// –£–¥–∞–ª–µ–Ω–∏–µ —É–ø—Ä–∞–≤–ª—è—é—â–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤, –∫—Ä–æ–º–µ \n, \r, \t
// –£–ø—Ä–∞–≤–ª—è—é—â–∏–µ —Å–∏–º–≤–æ–ª—ã: \x00-\x1F (–∫—Ä–æ–º–µ \n=0x0A, \r=0x0D, \t=0x09)
const result = strIn.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]/g, "");

pm.globals.set("str_sanitized", result);
console.log("str_sanitized =", result);
```

---

## –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–∏–º–µ—Ä

```javascript
pm.globals.set("str_in", "  –ü—Ä–∏–≤–µ—Ç   –º–∏—Ä  ");

// –í—Å—Ç–∞–≤—å—Ç–µ —Å–∫—Ä–∏–ø—Ç "3) Trim + collapse spaces"

// –†–µ–∑—É–ª—å—Ç–∞—Ç: {{str_trimmed}} = "–ü—Ä–∏–≤–µ—Ç –º–∏—Ä"
```

---

## –ü—Ä–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–µ

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –ø—Ä–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–µ [—à–∫–æ–ª—ã –≠—Ä–º–∏—Ç–∞](https://ermita.one/) ‚Äî –æ–Ω–ª–∞–π–Ω IT-—à–∫–æ–ª—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–æ–≤.

üìö [–ö—É—Ä—Å—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–æ–≤](https://ermita.one/courses/) | üí¨ [–¢–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª](https://t.me/ermita_one) | üéÆ [–¢—Ä–µ–Ω–∞–∂–µ—Ä—ã –¥–ª—è QA](http://qahacking.ru/)
